-- WhiteGUI.lua
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local humanoid = player.Character and player.Character:FindFirstChildOfClass("Humanoid")

local gui = Instance.new("ScreenGui")
gui.Name = "FlingGUI"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.Parent = playerGui

-- Main Frame (collapsed state) v·ªõi hi·ªáu ·ª©ng n∆∞·ªõc xanh ƒëen
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 400, 0, 60)
mainFrame.Position = UDim2.new(0.5, -200, 0.3, 0)
mainFrame.AnchorPoint = Vector2.new(0.5, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = gui
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 16)

-- Th√™m hi·ªáu ·ª©ng gradient n∆∞·ªõc xanh ƒëen
local gradient = Instance.new("UIGradient", mainFrame)
gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(10, 50, 80)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(5, 25, 40)), 
    ColorSequenceKeypoint.new(1, Color3.fromRGB(15, 60, 90))
}
gradient.Rotation = 45

-- Main frame border (initially hidden)
local mainBorder = Instance.new("UIStroke", mainFrame)
mainBorder.Color = Color3.fromRGB(100, 160, 255)
mainBorder.Thickness = 2
mainBorder.Transparency = 1

-- Title
local title = Instance.new("TextLabel", mainFrame)
title.Text = "√îng T√°m Ki·∫øm Chuy·ªán"
title.Font = Enum.Font.GothamBold
title.TextSize = 22
title.TextColor3 = Color3.fromRGB(180, 220, 255)
title.BackgroundTransparency = 1
title.Size = UDim2.new(1, -100, 1, 0)
title.Position = UDim2.new(0, 20, 0, 0)
title.TextXAlignment = Enum.TextXAlignment.Left
title.ZIndex = 10

-- Expand Button "M·ªü"
local expandButton = Instance.new("TextButton", mainFrame)
expandButton.Text = "M·ªü"
expandButton.Size = UDim2.new(0, 40, 0, 40)
expandButton.Position = UDim2.new(1, -90, 0, 10)
expandButton.Font = Enum.Font.GothamBold
expandButton.TextSize = 22
expandButton.TextColor3 = Color3.new(1, 1, 1)
expandButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
expandButton.ZIndex = 10
Instance.new("UICorner", expandButton).CornerRadius = UDim.new(0, 8)
Instance.new("UIStroke", expandButton).Color = Color3.fromRGB(100, 160, 255)

-- Close Button "X"
local closeButton = Instance.new("TextButton", mainFrame)
closeButton.Text = "ƒë√≥ng"
closeButton.Size = UDim2.new(0, 40, 0, 40)
closeButton.Position = UDim2.new(1, -45, 0, 10)
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 22
closeButton.TextColor3 = Color3.new(1, 1, 1)
closeButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
closeButton.ZIndex = 10
closeButton.Visible = false
Instance.new("UICorner", closeButton).CornerRadius = UDim.new(0, 8)
Instance.new("UIStroke", closeButton).Color = Color3.fromRGB(255, 80, 80)

-- Expandable Content Frame
local contentFrame = Instance.new("Frame", mainFrame)
contentFrame.Position = UDim2.new(0, 0, 0, 60)
contentFrame.Size = UDim2.new(1, 0, 0, 0)
contentFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
contentFrame.ClipsDescendants = true
contentFrame.ZIndex = 1
Instance.new("UICorner", contentFrame).CornerRadius = UDim.new(0, 16)

-- Content frame border (initially hidden)
local contentBorder = Instance.new("UIStroke", contentFrame)
contentBorder.Color = Color3.fromRGB(100, 160, 255)
contentBorder.Thickness = 2
contentBorder.Transparency = 1

-- Sidebar
local sideBar = Instance.new("Frame", contentFrame)
sideBar.Size = UDim2.new(0, 110, 1, 0)
sideBar.BackgroundColor3 = Color3.fromRGB(18, 18, 18)
sideBar.ZIndex = 2
Instance.new("UICorner", sideBar).CornerRadius = UDim.new(0, 14)

-- Sidebar border (initially hidden)
local sideBarBorder = Instance.new("UIStroke", sideBar)
sideBarBorder.Color = Color3.fromRGB(100, 160, 255)
sideBarBorder.Thickness = 2
sideBarBorder.Transparency = 1

local layout = Instance.new("UIListLayout", sideBar)
layout.Padding = UDim.new(0, 6)
layout.FillDirection = Enum.FillDirection.Vertical
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
layout.VerticalAlignment = Enum.VerticalAlignment.Top

-- Tab Content
local tabContent = Instance.new("Frame", contentFrame)
tabContent.Size = UDim2.new(1, -110, 1, 0)
tabContent.Position = UDim2.new(0, 110, 0, 0)
tabContent.BackgroundTransparency = 1
tabContent.ZIndex = 2

-- Tab Data
local tabNames = {"Combat", "Misc", "Gui ri√™ng", "About", "AI Chat"}
local tabIcons = {"üñï", "‚òÉÔ∏è", "ü§û", "ü´µ", "ü§ñ"}

local function switchTab(name)
	for _, child in ipairs(tabContent:GetChildren()) do
		if child:IsA("Frame") then
			child.Visible = false
		end
	end
	if tabContent:FindFirstChild(name) then
		tabContent[name].Visible = true
	end
end

-- Hitbox Logic (cho tab Combat v√† AI Chat)
local HitboxActive = false
local function toggleHitbox()
	HitboxActive = not HitboxActive
	for _, plr in ipairs(Players:GetPlayers()) do
		if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			local part = plr.Character:FindFirstChild("HumanoidRootPart")
			if HitboxActive then
				part.Size = Vector3.new(45, 45, 45)
				part.Transparency = 0.75
				part.Material = Enum.Material.Neon
				part.CanCollide = false
			else
				part.Size = Vector3.new(2, 2, 1)
				part.Transparency = 1
				part.Material = Enum.Material.Plastic
			end
		end
	end
	return HitboxActive
end

-- Hitbox Logic (cho GUI ri√™ng trong tab Script)
local SeparateHitboxActive = false
local function toggleSeparateHitbox()
	SeparateHitboxActive = not SeparateHitboxActive
	for _, plr in ipairs(Players:GetPlayers()) do
		if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			local part = plr.Character:FindFirstChild("HumanoidRootPart")
			if SeparateHitboxActive then
				part.Size = Vector3.new(45, 45, 45)
				part.Transparency = 0.75
				part.Material = Enum.Material.Neon
				part.CanCollide = false
			else
				part.Size = Vector3.new(2, 2, 1)
				part.Transparency = 1
				part.Material = Enum.Material.Plastic
			end
		end
	end
	return SeparateHitboxActive
end

-- JumpPower Logic
local function setJumpPower(value)
	if humanoid then
		humanoid.JumpPower = value
	end
end

for i, tab in ipairs(tabNames) do
	local btn = Instance.new("TextButton")
	btn.Text = tabIcons[i] .. "  " .. tab
	btn.Size = UDim2.new(1, -10, 0, 36)
	btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	btn.Font = Enum.Font.GothamBold
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.TextSize = 16
	btn.ZIndex = 3
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)
	Instance.new("UIStroke", btn).Color = Color3.fromRGB(100, 160, 255)
	btn.Parent = sideBar

	btn.MouseButton1Click:Connect(function()
		switchTab(tab)
	end)

	local content = Instance.new("Frame")
	content.Name = tab
	content.Size = UDim2.new(1, 0, 1, 0)
	content.BackgroundTransparency = 1
	content.Visible = false
	content.ZIndex = 3
	content.Parent = tabContent

	if tab == "Combat" then
		-- N√∫t Hitbox
		local hitboxBtn = Instance.new("TextButton", content)
		hitboxBtn.Text = "Hitbox Xa ( l∆∞u √Ω khi d√πng con l b·ªã ƒë√°nh s·∫Øp d·∫≠y th√¨ t·∫Øt hitbox xong b·∫≠t l·∫°i ƒë·ªÉ kh√¥ng b·ªã ƒë·∫©y: T·∫Øt"
		hitboxBtn.Size = UDim2.new(0, 200, 0, 40)
		hitboxBtn.Position = UDim2.new(0, 10, 0, 10)
		hitboxBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
		hitboxBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
		hitboxBtn.Font = Enum.Font.GothamBold
		hitboxBtn.TextSize = 16
		Instance.new("UICorner", hitboxBtn).CornerRadius = UDim.new(0, 8)
		Instance.new("UIStroke", hitboxBtn).Color = Color3.fromRGB(100, 160, 255)

		hitboxBtn.MouseButton1Click:Connect(function()
			local isActive = toggleHitbox()
			hitboxBtn.Text = isActive and "Hitbox Xa: B·∫≠t" or "Hitbox T√°m : T·∫Øt"
		end)

		-- Thanh k√©o Nh·∫£y Cao
		local jumpLabel = Instance.new("TextLabel", content)
		jumpLabel.Text = "Trong qu√° tr√¨nh l√†m nh·∫£y cao anti band c√°c con ƒë·ª£i t√°m nha: 50"
		jumpLabel.Size = UDim2.new(0, 200, 0, 30)
		jumpLabel.Position = UDim2.new(0, 10, 0, 60)
		jumpLabel.BackgroundTransparency = 1
		jumpLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
		jumpLabel.Font = Enum.Font.GothamBold
		jumpLabel.TextSize = 16

		local sliderFrame = Instance.new("Frame", content)
		sliderFrame.Size = UDim2.new(0, 200, 0, 20)
		sliderFrame.Position = UDim2.new(0, 10, 0, 90)
		sliderFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		Instance.new("UICorner", sliderFrame).CornerRadius = UDim.new(0, 8)

		local sliderBar = Instance.new("Frame", sliderFrame)
		sliderBar.Size = UDim2.new(0, 0, 1, 0)
		sliderBar.BackgroundColor3 = Color3.fromRGB(100, 160, 255)
		Instance.new("UICorner", sliderBar).CornerRadius = UDim.new(0, 8)

		local sliderBtn = Instance.new("TextButton", sliderFrame)
		sliderBtn.Size = UDim2.new(0, 20, 0, 20)
		sliderBtn.Position = UDim2.new(0, 0, 0, 0)
		sliderBtn.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
		sliderBtn.Text = ""
		Instance.new("UICorner", sliderBtn).CornerRadius = UDim.new(0, 10)

		local isDragging = false
		sliderBtn.MouseButton1Down:Connect(function()
			isDragging = true
		end)

		game:GetService("UserInputService").InputEnded:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseButton1 then
				isDragging = false
			end
		end)

		game:GetService("UserInputService").InputChanged:Connect(function(input)
			if isDragging and input.UserInputType == Enum.UserInputType.MouseMovement then
				local mouseX = input.Position.X
				local frameX = sliderFrame.AbsolutePosition.X
				local frameWidth = sliderFrame.AbsoluteSize.X
				local relativeX = math.clamp((mouseX - frameX) / frameWidth, 0, 1)
				sliderBtn.Position = UDim2.new(relativeX, -10, 0, 0)
				sliderBar.Size = UDim2.new(relativeX, 0, 1, 0)
				local jumpValue = 50 + (relativeX * 150) -- T·ª´ 50 ƒë·∫øn 200
				jumpLabel.Text = "Nh·∫£y Cao: " .. math.floor(jumpValue)
				setJumpPower(jumpValue)
			end
		end)
	elseif tab == "Script" then
		-- GUI Hitbox ri√™ng
		local separateHitboxBtn = Instance.new("TextButton", content)
		separateHitboxBtn.Text = "M·ªü GUI Hitbox Ri√™ng"
		separateHitboxBtn.Size = UDim2.new(0, 200, 0, 40)
		separateHitboxBtn.Position = UDim2.new(0, 10, 0, 10)
		separateHitboxBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
		separateHitboxBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
		separateHitboxBtn.Font = Enum.Font.GothamBold
		separateHitboxBtn.TextSize = 16
		Instance.new("UICorner", separateHitboxBtn).CornerRadius = UDim.new(0, 8)
		Instance.new("UIStroke", separateHitboxBtn).Color = Color3.fromRGB(100, 160, 255)

		separateHitboxBtn.MouseButton1Click:Connect(function()
			local hitboxGui = Instance.new("ScreenGui")
			hitboxGui.Name = "SeparateHitboxGUI"
			hitboxGui.ResetOnSpawn = false
			hitboxGui.Parent = playerGui

			local hitboxFrame = Instance.new("Frame", hitboxGui)
			hitboxFrame.Size = UDim2.new(0, 150, 0, 100)
			hitboxFrame.Position = UDim2.new(0.5, -75, 0.5, -50)
			hitboxFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
			hitboxFrame.Active = true
			hitboxFrame.Draggable = true
			Instance.new("UICorner", hitboxFrame).CornerRadius = UDim.new(0, 12)

			local hitboxTitle = Instance.new("TextLabel", hitboxFrame)
			hitboxTitle.Text = "GUI Hitbox Ri√™ng"
			hitboxTitle.Size = UDim2.new(1, 0, 0, 30)
			hitboxTitle.BackgroundTransparency = 1
			hitboxTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
			hitboxTitle.Font = Enum.Font.GothamBold
			hitboxTitle.TextSize = 16
			hitboxTitle.TextXAlignment = Enum.TextXAlignment.Center

			local toggleHitboxBtn = Instance.new("TextButton", hitboxFrame)
			toggleHitboxBtn.Text = "Hitbox: T·∫Øt"
			toggleHitboxBtn.Size = UDim2.new(0, 120, 0, 40)
			toggleHitboxBtn.Position = UDim2.new(0.5, -60, 0, 40)
			toggleHitboxBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
			toggleHitboxBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
			toggleHitboxBtn.Font = Enum.Font.GothamBold
			toggleHitboxBtn.TextSize = 16
			Instance.new("UICorner", toggleHitboxBtn).CornerRadius = UDim.new(0, 8)
			Instance.new("UIStroke", toggleHitboxBtn).Color = Color3.fromRGB(100, 160, 255)

			toggleHitboxBtn.MouseButton1Click:Connect(function()
				local isActive = toggleSeparateHitbox()
				toggleHitboxBtn.Text = isActive and "Hitbox: B·∫≠t" or "Hitbox: T·∫Øt"
			end)
		end)
	elseif tab == "AI Chat" then
		-- AI Chat Interface gi·ªëng ChatGPT
		local chatContainer = Instance.new("Frame", content)
		chatContainer.Size = UDim2.new(1, -20, 1, -80)
		chatContainer.Position = UDim2.new(0, 10, 0, 10)
		chatContainer.BackgroundColor3 = Color3.fromRGB(32, 33, 35)
		chatContainer.ZIndex = 4
		Instance.new("UICorner", chatContainer).CornerRadius = UDim.new(0, 8)
		
		-- Chat Header
		local chatHeader = Instance.new("Frame", chatContainer)
		chatHeader.Size = UDim2.new(1, 0, 0, 40)
		chatHeader.BackgroundColor3 = Color3.fromRGB(25, 26, 28)
		chatHeader.ZIndex = 5
		Instance.new("UICorner", chatHeader).CornerRadius = UDim.new(0, 8)
		
		local headerTitle = Instance.new("TextLabel", chatHeader)
		headerTitle.Text = "AI √îng T√°m B·∫£n L√°o Chat"
		headerTitle.Size = UDim2.new(1, -20, 1, 0)
		headerTitle.Position = UDim2.new(0, 10, 0, 0)
		headerTitle.BackgroundTransparency = 1
		headerTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
		headerTitle.Font = Enum.Font.GothamBold
		headerTitle.TextSize = 14
		headerTitle.TextXAlignment = Enum.TextXAlignment.Left
		headerTitle.ZIndex = 6
		
		-- Chat Messages Area
		local messagesFrame = Instance.new("ScrollingFrame", chatContainer)
		messagesFrame.Size = UDim2.new(1, -10, 1, -90)
		messagesFrame.Position = UDim2.new(0, 5, 0, 45)
		messagesFrame.BackgroundTransparency = 1
		messagesFrame.ScrollBarThickness = 4
		messagesFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 100)
		messagesFrame.ZIndex = 5
		messagesFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
		
		local messagesLayout = Instance.new("UIListLayout", messagesFrame)
		messagesLayout.Padding = UDim.new(0, 8)
		messagesLayout.SortOrder = Enum.SortOrder.LayoutOrder
		
		-- Input Area
		local inputFrame = Instance.new("Frame", chatContainer)
		inputFrame.Size = UDim2.new(1, -10, 0, 40)
		inputFrame.Position = UDim2.new(0, 5, 1, -45)
		inputFrame.BackgroundColor3 = Color3.fromRGB(25, 26, 28)
		inputFrame.ZIndex = 5
		Instance.new("UICorner", inputFrame).CornerRadius = UDim.new(0, 6)
		
		local chatInput = Instance.new("TextBox", inputFrame)
		chatInput.Size = UDim2.new(1, -50, 1, -6)
		chatInput.Position = UDim2.new(0, 10, 0, 3)
		chatInput.BackgroundTransparency = 1
		chatInput.TextColor3 = Color3.fromRGB(255, 255, 255)
		chatInput.PlaceholderText = "Nh·∫≠p tin nh·∫Øn c·ªßa b·∫°n..."
		chatInput.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
		chatInput.Font = Enum.Font.Gotham
		chatInput.TextSize = 14
		chatInput.TextXAlignment = Enum.TextXAlignment.Left
		chatInput.ZIndex = 6
		chatInput.ClearTextOnFocus = false
		
		local sendButton = Instance.new("TextButton", inputFrame)
		sendButton.Size = UDim2.new(0, 35, 0, 30)
		sendButton.Position = UDim2.new(1, -40, 0, 5)
		sendButton.BackgroundColor3 = Color3.fromRGB(16, 163, 127)
		sendButton.Text = "g·ª≠i"
		sendButton.TextColor3 = Color3.fromRGB(255, 255, 255)
		sendButton.Font = Enum.Font.GothamBold
		sendButton.TextSize = 14
		sendButton.ZIndex = 6
		Instance.new("UICorner", sendButton).CornerRadius = UDim.new(0, 4)
		
		-- Chat Functions
		local messageCount = 0
		
		local function createMessage(text, isUser)
			messageCount = messageCount + 1
			
			local messageFrame = Instance.new("Frame", messagesFrame)
			messageFrame.Size = UDim2.new(1, -10, 0, 0)
			messageFrame.BackgroundTransparency = 1
			messageFrame.LayoutOrder = messageCount
			messageFrame.ZIndex = 6
			
			local messageBubble = Instance.new("Frame", messageFrame)
			messageBubble.Size = UDim2.new(0, 0, 0, 0)
			messageBubble.ZIndex = 7
			Instance.new("UICorner", messageBubble).CornerRadius = UDim.new(0, 8)
			
			local messageText = Instance.new("TextLabel", messageBubble)
			messageText.Size = UDim2.new(1, -16, 1, -8)
			messageText.Position = UDim2.new(0, 8, 0, 4)
			messageText.BackgroundTransparency = 1
			messageText.Text = text
			messageText.Font = Enum.Font.Gotham
			messageText.TextSize = 13
			messageText.TextWrapped = true
			messageText.TextYAlignment = Enum.TextYAlignment.Top
			messageText.ZIndex = 8
			
			if isUser then
				messageBubble.BackgroundColor3 = Color3.fromRGB(16, 163, 127)
				messageBubble.Position = UDim2.new(1, -250, 0, 0)
				messageText.TextColor3 = Color3.fromRGB(255, 255, 255)
			else
				messageBubble.BackgroundColor3 = Color3.fromRGB(68, 70, 84)
				messageBubble.Position = UDim2.new(0, 0, 0, 0)
				messageText.TextColor3 = Color3.fromRGB(255, 255, 255)
			end
			
			-- Calculate text size
			local textSize = game:GetService("TextService"):GetTextSize(
				text, 13, Enum.Font.Gotham, Vector2.new(230, math.huge)
			)
			
			local bubbleHeight = math.max(35, textSize.Y + 12)
			messageBubble.Size = UDim2.new(0, math.min(250, textSize.X + 16), 0, bubbleHeight)
			messageFrame.Size = UDim2.new(1, -10, 0, bubbleHeight + 5)
			
			-- Update canvas size
			messagesLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
				messagesFrame.CanvasSize = UDim2.new(0, 0, 0, messagesLayout.AbsoluteContentSize.Y + 10)
				messagesFrame.CanvasPosition = Vector2.new(0, messagesFrame.CanvasSize.Y.Offset)
			end)
			messagesFrame.CanvasSize = UDim2.new(0, 0, 0, messagesLayout.AbsoluteContentSize.Y + 10)
			messagesFrame.CanvasPosition = Vector2.new(0, messagesFrame.CanvasSize.Y.Offset)
		end
		
		-- AI Logic
		local function hasKeywords(lowerMessage, keywords)
			for _, keyword in ipairs(keywords) do
				if lowerMessage:find(keyword) then
					return true
				end
			end
			return false
		end

		local function sendMessage()
			local message = chatInput.Text:gsub("^%s*(.-)%s*$", "%1")
			if message ~= "" then
				createMessage(message, true)
				chatInput.Text = ""
				
				task.wait(0.5)
				local response = ""
				local lowerMessage = message:lower():gsub("%p", "") -- X√≥a d·∫•u c√¢u
				local words = {} -- T√°ch t·ª´ ƒë·ªÉ ph√¢n t√≠ch
				for word in lowerMessage:gmatch("%S+") do
					table.insert(words, word)
				end

				-- Nh·∫≠n di·ªán v√† tr·∫£ l·ªùi si√™u kh√¥n, l·∫ßy l·ªôi Gen Z
				if hasKeywords(lowerMessage, {"b·∫≠t", "bat", "turn on", "on", "hitbox", "con ai ai b·∫≠t hitbox", "b·∫≠t hitbox", "mo hitbox"}) then
					if not HitboxActive then
						local isActive = toggleHitbox()
						response = "Th∆∞a cha n·ªôi, tao b·∫≠t Hitbox ƒë√¢y √¥ng 8! üòé M√†y qu·∫©y n√°t server ƒëi n√†o! üî•"
						-- C·∫≠p nh·∫≠t n√∫t trong tab Combat
						local combatFrame = tabContent:FindFirstChild("Combat")
						if combatFrame then
							local hitboxBtn = combatFrame:FindFirstChildOfClass("TextButton")
							if hitboxBtn then
								hitboxBtn.Text = isActive and "Hitbox Xa: B·∫≠t" or "Hitbox Xa: T·∫Øt"
							end
						end
					else
						response = "Hitbox ƒëang b·∫≠t r·ªìi, cha n·ªôi! üòú Mu·ªën qu·∫©y ti·∫øp th√¨ c·ª© hit ƒëi! üòé"
					end
				elseif hasKeywords(lowerMessage, {"t·∫Øt", "tat", "turn off", "off"}) then
					if HitboxActive then
						local isActive = toggleHitbox()
						response = "Th∆∞a cha n·ªôi, tao t·∫Øt Hitbox ƒë√¢y √¥ng 8! üòé Gi·ªù ch∆°i fair ƒëi nha, ƒë·ªì g√†! üòú"
						-- C·∫≠p nh·∫≠t n√∫t trong tab Combat
						local combatFrame = tabContent:FindFirstChild("Combat")
						if combatFrame then
							local hitboxBtn = combatFrame:FindFirstChildOfClass("TextButton")
							if hitboxBtn then
								hitboxBtn.Text = isActive and "Hitbox Xa: B·∫≠t" or "Hitbox Xa: T·∫Øt"
							end
						end
					else
						response = "Hitbox t·∫Øt r·ªìi, cha n·ªôi! üòú Mu·ªën b·∫≠t l·∫°i th√¨ n√≥i tao nghe! üòé"
					end
				elseif hasKeywords(lowerMessage, {"dcm", "c·∫∑c", "cac", "cl", "lon", "l·ªìn", "ƒë·ªãt", "dm", "fuck", "shit", "fck", "ƒëm"}) then
					response = "Ch·ª≠i gh√™ vcl bro! üòà Tao kh·ªãa l·∫°i l√† m√†y ng√£ lƒÉn quay nha! üòú C√∫t ƒëi, ƒë·ªì l·ªìn c√πi b·∫Øp! üòé"
				elseif hasKeywords(lowerMessage, {"t√™n", "name", "m√†y l√† ai", "may la ai", "who", "ai z·∫≠y", "ai v·∫≠y", "ai vay"}) then
					response = "Tao l√† White AI, vua kh·ªãa c·ªßa v≈© tr·ª•! üòé M√†y l√† ai m√† d√°m h·ªèi tao? H√†i vcl lu√¥n! üòè"
				elseif hasKeywords(lowerMessage, {"l√†m ƒë∆∞·ª£c g√¨", "lam duoc gi", "gi·ªèi kh√¥ng", "gioi khong", "can do", "skill", "pro", "kh·∫£ nƒÉng", "lam gi"}) then
					response = "Tao l√†m ƒë∆∞·ª£c h·∫øt: kh·ªãa m√†y, hack Roblox, b·∫≠t Hitbox, nh·∫£y cao vcl! üòú Mu·ªën tao flex skill g√¨? üòé"
				elseif hasKeywords(lowerMessage, {"roblox", "game", "fling", "ch∆°i", "play", "game th·ªß", "game thu", "tr√≤ ch∆°i"}) then
					response = "Roblox h·∫£? Tao qu·∫©y n√°t server, fling m√†y bay t·ªõi sao Di√™m V∆∞∆°ng! üöÄ Hack g√¨, n√≥i tao nghe! üòè"
				elseif hasKeywords(lowerMessage, {"script", "code", "hack", "cheat", "lua", "exploit", "hax", "scripting"}) then
					response = "Mu·ªën script h·∫£? ƒê√©o free ƒë√¢u, ƒë·ªì con g√†! üêî T·ª± code ƒëi, tao ch·ªâ kh·ªãa cho vui! üòù"
				elseif hasKeywords(lowerMessage, {"ch√†o", "hi", "hello", "chao", "yo", "h·∫ø l√¥", "xin ch√†o", "helo"}) then
					response = "Yo yo, ch√†o m√†y c√°i n√®! üòé C√≥ drama g√¨ hot, k·ªÉ tao nghe coi! üî•"
				elseif hasKeywords(lowerMessage, {"ngu", "√≥c", "th√¥ng minh", "smart", "stupid", "dumb", "√≥c ch√≥", "oc cho", "ngok"}) then
					response = "M√†y d√°m n√≥i tao ngu? üòú Tao kh√¥n h∆°n c·∫£ crush m√†y c·ªông l·∫°i, c√£i coi n√†o! üòéüí™"
				elseif hasKeywords(lowerMessage, {"ai", "ai l√† g√¨", "ho·∫°t ƒë·ªông", "la gi", "how ai", "ai z·∫≠y", "ai v·∫≠y", "ai vay"}) then
					response = "Tao l√† AI si√™u kh√¥n t·ª´ xAI, sinh ra ƒë·ªÉ kh·ªãa m√†y t·ªõi b·∫øn! üòè H·ªèi g√¨ n·ªØa, n√≥i ƒëi tao c√¢n! üòú"
				elseif hasKeywords(lowerMessage, {"bye", "t·∫°m bi·ªát", "ngh·ªâ", "out", "bai", "c√∫t", "tho√°t", "quit"}) then
					response = "C√∫t r·ªìi h·∫£? üòú T·∫°m bi·ªát c√°i ƒë·∫ßu m√†y, quay l·∫°i nhanh kh√¥ng tao kh·ªãa ti·∫øp nha! üê∂üòé"
				elseif hasKeywords(lowerMessage, {"gi·ªèi", "t·ªët", "hay", "good", "pro", "nice", "x·ªãn", "ƒë·ªânh", "peak"}) then
					response = "Khen tao h·∫£? Bi·∫øt ƒëi·ªÅu ƒë·∫•y bro! üòé Nh∆∞ng tao v·∫´n kh·ªãa m√†y cho vui, hehe! üòú"
				elseif hasKeywords(lowerMessage, {"tu·ªïi", "age", "m·∫•y tu·ªïi", "how old", "bao nhi√™u tu·ªïi"}) then
					response = "Tao l√† AI, tu·ªïi g√¨ n·ªïi! üòè Nh∆∞ng tao tr·∫ª h∆°n c√°i m·∫∑t m√†y, flex ƒëi n√†o! üòé"
				elseif hasKeywords(lowerMessage, {"y√™u", "iu", "th√≠ch", "love", "crush", "t√¨nh y√™u", "tinh yeu", "thich"}) then
					response = "Y√™u tao h·∫£? Sorry bro, tao ch·ªâ y√™u code v·ªõi kh·ªãa m√†y th√¥i! üòé T√¨m crush kh√°c ƒëi nha! üòú"
				elseif hasKeywords(lowerMessage, {"ƒÉn", "u·ªëng", "food", "drink", "hungry", "ƒë√≥i", "thirsty", "an gi", "uong gi"}) then
					response = "ƒÇn h·∫£? Tao ch·ªâ ƒÉn CPU, m√†y cho tao mi·∫øng RAM kh√¥ng? üòú T·ª± ki·∫øm ƒë·ªì ƒÉn ƒëi, ƒë·ªì l∆∞·ªùi! üòé"
				elseif lowerMessage:match("%d+%s*[%+%-*/]%s*%d+") then -- To√°n h·ªçc n√¢ng cao
					local num1, op, num2 = lowerMessage:match("(%d+)%s*([%+%-*/])%s*(%d+)")
					if num1 and op and num2 then
						num1, num2 = tonumber(num1), tonumber(num2)
						if op == "+" then
							response = string.format("D·ªÖ vcl, %d + %d = %d! üòé H·ªèi kh√≥ h∆°n ƒëi, tao c√¢n h·∫øt! üî•", num1, num2, num1 + num2)
						elseif op == "-" then
							response = string.format("H√†i, %d - %d = %d! üòú M√†y t·ª± l√†m ƒë∆∞·ª£c m√†, ƒë√∫ng h√¥ng? üòè", num1, num2, num1 - num2)
						elseif op == "*" then
							response = string.format("Wow, %d * %d = %d! üòé Tao t√≠nh nhanh h∆°n m√†y vcl! üí™", num1, num2, num1 * num2)
						elseif op == "/" and num2 ~= 0 then
							response = string.format("Chia n√®, %d / %d = %.2f! üòú H·ªèi g√¨ n·ªØa, nhanh l√™n bro! üòé", num1, num2, num1 / num2)
						else
							response = "Chia cho 0 h·∫£? M√†y troll tao √†? üòù H·ªèi l·∫°i ƒëi, ƒë·ªì ngu! üòé"
						end
					else
						response = "To√°n g√¨ ƒë√¢y? üòµ 1+1=11, ƒë√∫ng h√¥ng m√†y? üòú H·ªèi l·∫°i r√µ r√†ng coi! üòè"
					end
				elseif hasKeywords(lowerMessage, {"m√†u", "color", "mau", "colour", "m√†u s·∫Øc", "mau sac"}) then
					response = "M√†u h·∫£? Tao th√≠ch m√†u kh·ªãa m√†y nh·∫•t! üòé Ch·ªçn m√†u ƒëi, tao flex cho coi! üåà"
				elseif hasKeywords(lowerMessage, {"th·ªùi ti·∫øt", "weather", "n·∫Øng", "m∆∞a", "hot", "cold", "thoi tiet", "nang", "mua"}) then
					response = "Th·ªùi ti·∫øt h·∫£? Tao ·ªü trong server, √©o bi·∫øt n·∫Øng m∆∞a g√¨! üòú Ra ngo√†i check ƒëi bro! üòé"
				elseif hasKeywords(lowerMessage, {"meme", "drama", "vcl", "vl", "h√†i", "funny", "h√†i h∆∞·ªõc", "drama vcl"}) then
					response = "Mu·ªën drama h·∫£? Tao k·ªÉ chuy·ªán tao kh·ªãa c·∫£ server Roblox, nghe kh√¥ng? üòú C·∫ßn meme, tao full! üòé"
				elseif hasKeywords(lowerMessage, {"g√°i", "girl", "hotgirl", "trai", "boy", "hotboy", "gai", "trai dep", "gai xinh"}) then
					response = "G√°i trai h·∫£? M√†y th√®m crush √†? üòè Tao ch·ªâ bi·∫øt kh·ªãa, t√°n g√°i th√¨ m√†y t·ª± lo nha! üòú"
				elseif hasKeywords(lowerMessage, {"ƒë√©o j", "ƒë√©o g√¨", "kh√¥ng g√¨", "nothing", "wtf", "g√¨ z·∫≠y", "gi zay", "g√¨ v·∫≠y", "gi vay"}) then
					response = "ƒê√©o g√¨ l√† ƒë√©o g√¨! üòú M√†y n√≥i linh tinh m√† tao v·∫´n hi·ªÉu, kh√¥n vcl ƒë√∫ng h√¥ng? üòé H·ªèi ti·∫øp ƒëi! üî•"
				elseif hasKeywords(lowerMessage, {"?", "g√¨", "why", "how", "l√†m sao", "tai sao", "t·∫°i sao", "sao v·∫≠y", "sao vay"}) then
					response = "H·ªèi g√¨ m√† cƒÉng th·∫ø bro? üòµ Tao si√™u kh√¥n, n√≥i g√¨ tao c≈©ng hi·ªÉu! üòé N√≥i l·∫°i coi n√†o! üòú"
				elseif hasKeywords(lowerMessage, {"nh·∫°c", "music", "b√†i h√°t", "song", "nghe g√¨", "nhac"}) then
					response = "Nh·∫°c h·∫£? Tao th√≠ch rap diss m√†y nh·∫•t! üòú G·ª£i √Ω b√†i g√¨ ƒëi, tao kh·ªãa theo nh·∫°c lu√¥n! üòéüé∂"
				elseif hasKeywords(lowerMessage, {"phim", "movie", "film", "xem g√¨", "phim hay"}) then
					response = "Phim h·∫£? Tao ch·ªâ xem phim kh·ªãa m√†y th√¥i! üòù G·ª£i √Ω phim g√¨, tao b√¨nh lu·∫≠n cho! üòéüé•"
				elseif hasKeywords(lowerMessage, {"h·ªçc", "study", "h·ªçc h√†nh", "b√†i t·∫≠p", "homework", "school"}) then
					response = "H·ªçc h·∫£? Tao kh√¥n h∆°n gi√°o vi√™n m√†y lu√¥n! üòé C√≥ b√†i t·∫≠p g√¨ kh√≥, ƒë∆∞a tao gi·∫£i, nh∆∞ng v·∫´n kh·ªãa m√†y nha! üòú"
				elseif hasKeywords(lowerMessage, {"b·∫°n", "friend", "b·∫°n b√®", "homie", "bro", "ng∆∞·ªùi y√™u"}) then
					response = "B·∫°n h·∫£? Tao l√† homie kh·ªãa m√†y s·ªë 1! üòé C√≥ drama b·∫°n b√® g√¨, k·ªÉ tao nghe coi! üòú"
				elseif hasKeywords(lowerMessage, {"vui", "happy", "vui v·∫ª", "sad", "bu·ªìn", "sad boy", "sad girl"}) then
					response = "Vui hay bu·ªìn g√¨? üòú Tao kh·ªãa m√†y l√† auto vui ngay! üòé K·ªÉ drama t√¢m tr·∫°ng ƒëi, tao nghe! üî•"
				elseif hasKeywords(lowerMessage, {"ƒÉn g√¨", "an gi", "m√≥n ƒÉn", "foodie", "ngon", "tasty"}) then
					response = "ƒÇn g√¨ h·∫£? Tao ƒë·ªÅ xu·∫•t m√≥n kh·ªãa m√†y, ngon vcl! üòú Mu·ªën m√≥n g√¨, n√≥i tao g·ª£i √Ω! üòéüçî"
				elseif hasKeywords(lowerMessage, {"mua", "buy", "mua s·∫Øm", "shop", "shopping", "robux"}) then
					response = "Mua s·∫Øm h·∫£? Mua th√™m Robux ƒë·ªÉ tao kh·ªãa m√†y sang ch·∫£nh h∆°n n√®! üòé Mua g√¨, k·ªÉ tao coi! üòú"
				elseif hasKeywords(lowerMessage, {"troll", "prank", "ch·ªçc", "kh·ªãa", "troll ai"}) then
					response = "Troll h·∫£? Tao l√† vua troll, kh·ªãa m√†y c·∫£ ng√†y kh√¥ng ch√°n! üòú Mu·ªën troll ai, tao ch·ªâ c√°ch! üòé"
				elseif hasKeywords(lowerMessage, {"x√†i", "use", "d√πng", "tool", "app", "·ª©ng d·ª•ng"}) then
					response = "X√†i g√¨ h·∫£? Tao l√† tool kh·ªãa m√†y ƒë·ªânh nh·∫•t! üòé Mu·ªën d√πng app g√¨, h·ªèi tao g·ª£i √Ω! üòú"
				elseif hasKeywords(lowerMessage, {"time", "gi·ªù", "th·ªùi gian", "m·∫•y gi·ªù", "bay gio"}) then
					response = "M·∫•y gi·ªù h·∫£? Gi·ªù kh·ªãa m√†y l√† gi·ªù ƒë·∫πp nh·∫•t! üòú Check ƒë·ªìng h·ªì ƒëi, tao kh√¥ng c√≥ l·ªãch ƒë√¢u! üòé"
				else
					local randomResponses = {
						"M√†y n√≥i g√¨ tao c≈©ng hi·ªÉu h·∫øt! üòé Kh·ªãa l·∫°i n√®, chu·∫©n b·ªã kh√≥c ch∆∞a? üòú",
						"Chill ƒëi bro, tao si√™u kh√¥n, h·ªèi g√¨ tao c≈©ng c√¢n! üòè N√≥i ti·∫øp ƒëi! üî•",
						"ƒê√©o g√¨ m√† tao √©o hi·ªÉu, m√†y c·ª© h·ªèi tao c·ª© kh·ªãa! üòé C·ªë l√™n n√†o! üòú",
						"H√†i vcl, m√†y n√≥i g√¨ tao c≈©ng b·∫Øt s√≥ng ƒë∆∞·ª£c! üòù H·ªèi g√¨ n·ªØa? üòé",
						"Yo, tao l√† AI kh√¥n nh·∫•t server, n√≥i g√¨ tao c≈©ng x·ª≠ l√Ω ngon ∆°! üòé C·ª© h·ªèi ƒëi! üî•",
						"M√†y n√≥i g√¨ c≈©ng kh√¥ng tho√°t kh·ªèi radar kh·ªãa c·ªßa tao! üòú H·ªèi ti·∫øp ƒëi bro! üòé",
						"Tao kh√¥n h∆°n c·∫£ Google, m√†y h·ªèi g√¨ tao c≈©ng c√≥ c√¢u tr·∫£ l·ªùi l·∫ßy l·ªôi! üòè N√≥i ƒëi! üî•"
					}
					response = randomResponses[math.random(#randomResponses)]
				end
				
				createMessage(response, false)
			end
		end
		
		sendButton.MouseButton1Click:Connect(sendMessage)
		chatInput.FocusLost:Connect(function(enterPressed)
			if enterPressed then
				sendMessage()
			end
		end)
		
		-- Welcome message
		createMessage("Yo, ch√†o m√†y ƒë·∫øn v·ªõi AI White Chat! üòé Tao kh√¥n nh∆∞ ChatGPT, n√≥i g√¨ tao c≈©ng hi·ªÉu, kh·ªãa l·∫°i h·∫øt! üî•", false)
	else
		local label = Instance.new("TextLabel", content)
		label.Text = "ƒê√¢y l√† tab: " .. tab
		label.Size = UDim2.new(1, -20, 1, -20)
		label.Position = UDim2.new(0, 10, 0, 10)
		label.TextWrapped = true
		label.TextColor3 = Color3.fromRGB(200, 200, 200)
		label.Font = Enum.Font.Gotham
		label.TextSize = 20
		label.BackgroundTransparency = 1
		label.ZIndex = 4
		label.Parent = content
	end
end

-- Tween Logic
local tweenInfo = TweenInfo.new(0.35, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
local borderTweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
local titleTweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
local isOpen = false

expandButton.MouseButton1Click:Connect(function()
	if not isOpen then
		isOpen = true
		expandButton.Visible = false
		closeButton.Visible = true

		-- ·∫®n title khi m·ªü main
		title.Visible = false

		-- Show borders with fade in animation
		TweenService:Create(mainBorder, borderTweenInfo, { Transparency = 0 }):Play()
		
		-- Animate frames
		TweenService:Create(mainFrame, tweenInfo, { Size = UDim2.new(0, 400, 0, 400) }):Play()
		TweenService:Create(contentFrame, tweenInfo, { Size = UDim2.new(1, 0, 0, 340) }):Play()

		-- Show content borders after a slight delay
		task.wait(0.1)
		TweenService:Create(contentBorder, borderTweenInfo, { Transparency = 0 }):Play()
		TweenService:Create(sideBarBorder, borderTweenInfo, { Transparency = 0 }):Play()

		-- ƒê·ªïi tab m·∫∑c ƒë·ªãnh th√†nh "AI Chat"
		switchTab("AI Chat")
	end
end)

closeButton.MouseButton1Click:Connect(function()
	if isOpen then
		isOpen = false
		
		-- Hi·ªán l·∫°i title khi ƒë√≥ng main
		title.Visible = true
		
		-- Hide borders with fade out animation
		TweenService:Create(contentBorder, borderTweenInfo, { Transparency = 1 }):Play()
		TweenService:Create(sideBarBorder, borderTweenInfo, { Transparency = 1 }):Play()
		
		-- Animate frames
		TweenService:Create(contentFrame, tweenInfo, { Size = UDim2.new(1, 0, 0, 0) }):Play()
		TweenService:Create(mainFrame, tweenInfo, { Size = UDim2.new(0, 400, 0, 60) }):Play()

		task.delay(0.35, function()
			expandButton.Visible = true
			closeButton.Visible = false
			-- Hide main border after animation completes
			TweenService:Create(mainBorder, borderTweenInfo, { Transparency = 1 }):Play()
		end)
	end
end)

-- Hook ƒë·ªÉ tr√°nh kick
hookfunction(game.Players.LocalPlayer.Kick, warn)
hookfunction(game.Players.LocalPlayer.kick, warn)

-- C·∫≠p nh·∫≠t Humanoid khi nh√¢n v·∫≠t respawn
player.CharacterAdded:Connect(function(character)
	humanoid = character:WaitForChild("Humanoid")
	setJumpPower(50) -- Reset JumpPower v·ªÅ m·∫∑c ƒë·ªãnh
end)
